{% extends 'base.html' %}

{% block content %}
    <h2>Dashboard Calon Siswa</h2>
    
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <p>Selamat datang! Silakan lengkapi data berikut untuk pendaftaran.</p>

    <form method="POST" enctype="multipart/form-data">
        <label for="nama">Nama:</label>
        <input type="text" name="nama" id="nama" required>
        <br>
        <label for="asal_sekolah">Asal Sekolah:</label>
        <input type="text" name="asal_sekolah" id="asal_sekolah" required>
        <br>
        <label for="tempat_lahir">Tempat Lahir:</label>
        <input type="text" name="tempat_lahir" id="tempat_lahir" required>
        <br>
        <label for="nilai">Nilai:</label>
        <input type="number" name="nilai" id="nilai" required>
        <br>
        <label for="ijazah">Ijazah (PDF/JPG/PNG):</label>
        <input type="file" name="ijazah" id="ijazah" accept=".pdf,.jpg,.jpeg,.png" required>
        <br>
        <label for="bukti_pembayaran">Bukti Pembayaran (PDF/JPG/PNG):</label>
        <input type="file" name="bukti_pembayaran" id="bukti_pembayaran" accept=".pdf,.jpg,.jpeg,.png" required>
        <br>
        <label for="rapor">Nilai Rapor (PDF/JPG/PNG):</label>
        <input type="file" name="rapor" id="rapor" accept=".pdf,.jpg,.jpeg,.png" required>
        <br>
        <input type="submit" value="Kirim Data">
    </form>

    <h3>Data Anda</h3>
    <ul>
        {% for s in siswa_data %}
            <li>
                {{ s.nama }} - {{ s.asal_sekolah }} - {{ s.tempat_lahir }} - Nilai: {{ s.nilai }} - Status: {{ s.status }}
                <br>
                {% if s.ijazah_file %}
                    <a href="{{ url_for('static', filename='uploads/' + s.ijazah_file) }}" target="_blank">Lihat Ijazah</a>
                {% endif %}
                {% if s.bukti_pembayaran %}
                    <a href="{{ url_for('static', filename='uploads/' + s.bukti_pembayaran) }}" target="_blank">Lihat Bukti Pembayaran</a>
                {% endif %}
                {% if s.rapor_file %}
                    <a href="{{ url_for('static', filename='uploads/' + s.rapor_file) }}" target="_blank">Lihat Rapor</a>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
{% endblock %}
